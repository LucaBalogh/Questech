{"ast":null,"code":"var _jsxFileName = \"D:\\\\Faculta\\\\Licenta\\\\Traveltech\\\\src\\\\locationpage\\\\locationAll\\\\LocationProvider.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from \"react\";\nimport { createLocation, updateLocation } from \"./locationApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  saving: false\n};\nexport const LocationContext = /*#__PURE__*/React.createContext(initialState);\nexport const LocationProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, setState] = useState(initialState);\n  const {\n    saving,\n    savingError\n  } = state;\n  const saveLocation = useCallback(saveLocationCallback, []);\n  const value = {\n    saving,\n    savingError,\n    saveLocation\n  };\n  return /*#__PURE__*/_jsxDEV(LocationContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n\n  async function saveLocationCallback(location) {\n    try {\n      setState({ ...state,\n        savingError: null,\n        saving: true\n      });\n      const loc = {\n        id: location.id,\n        city: location.city,\n        country: location.country,\n        tip: location.tip,\n        rating: location.rating,\n        user: location.user\n      };\n      const savedLocation = await (location.id ? updateLocation(loc) : createLocation(loc));\n      setState({ ...state,\n        savingError: null,\n        saving: false\n      });\n      return savedLocation;\n    } catch (error) {\n      setState({ ...state,\n        savingError: error,\n        saving: false\n      });\n    }\n  }\n};\n\n_s(LocationProvider, \"kAHu6Lsp2XbNQLYS+135vBW8bjc=\");\n\n_c = LocationProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"LocationProvider\");","map":{"version":3,"sources":["D:/Faculta/Licenta/Traveltech/src/locationpage/locationAll/LocationProvider.tsx"],"names":["React","useCallback","useState","createLocation","updateLocation","initialState","saving","LocationContext","createContext","LocationProvider","children","state","setState","savingError","saveLocation","saveLocationCallback","value","location","loc","id","city","country","tip","rating","user","savedLocation","error"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,QAA6C,OAA7C;AAGA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,eAA/C;;AAUA,MAAMC,YAA2B,GAAG;AAClCC,EAAAA,MAAM,EAAE;AAD0B,CAApC;AAIA,OAAO,MAAMC,eAAe,gBAAGP,KAAK,CAACQ,aAAN,CAC7BH,YAD6B,CAAxB;AAQP,OAAO,MAAMI,gBAAiD,GAAG,QAE3D;AAAA;;AAAA,MAF4D;AAChEC,IAAAA;AADgE,GAE5D;AACJ,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAgBG,YAAhB,CAAlC;AACA,QAAM;AAAEC,IAAAA,MAAF;AAAUO,IAAAA;AAAV,MAA0BF,KAAhC;AACA,QAAMG,YAAY,GAAGb,WAAW,CAAiBc,oBAAjB,EAAuC,EAAvC,CAAhC;AACA,QAAMC,KAAK,GAAG;AACZV,IAAAA,MADY;AAEZO,IAAAA,WAFY;AAGZC,IAAAA;AAHY,GAAd;AAMA,sBACE,QAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAEE,KAAjC;AAAA,cACGN;AADH;AAAA;AAAA;AAAA;AAAA,UADF;;AAMA,iBAAeK,oBAAf,CAAoCE,QAApC,EAA6D;AAC3D,QAAI;AACFL,MAAAA,QAAQ,CAAC,EAAC,GAAGD,KAAJ;AAAWE,QAAAA,WAAW,EAAE,IAAxB;AAA8BP,QAAAA,MAAM,EAAE;AAAtC,OAAD,CAAR;AACA,YAAMY,GAAG,GAAG;AACVC,QAAAA,EAAE,EAAEF,QAAQ,CAACE,EADH;AAEVC,QAAAA,IAAI,EAAEH,QAAQ,CAACG,IAFL;AAGVC,QAAAA,OAAO,EAAEJ,QAAQ,CAACI,OAHR;AAIVC,QAAAA,GAAG,EAAEL,QAAQ,CAACK,GAJJ;AAKVC,QAAAA,MAAM,EAAEN,QAAQ,CAACM,MALP;AAMVC,QAAAA,IAAI,EAAEP,QAAQ,CAACO;AANL,OAAZ;AAQA,YAAMC,aAAa,GAAG,OAAOR,QAAQ,CAACE,EAAT,GACvBf,cAAc,CAACc,GAAD,CADS,GAEvBf,cAAc,CAACe,GAAD,CAFE,CAAtB;AAGAN,MAAAA,QAAQ,CAAC,EAAC,GAAGD,KAAJ;AAAWE,QAAAA,WAAW,EAAE,IAAxB;AAA8BP,QAAAA,MAAM,EAAE;AAAtC,OAAD,CAAR;AACA,aAAOmB,aAAP;AACD,KAfD,CAeE,OAAOC,KAAP,EAAmB;AACnBd,MAAAA,QAAQ,CAAC,EAAC,GAAGD,KAAJ;AAAWE,QAAAA,WAAW,EAAEa,KAAxB;AAA+BpB,QAAAA,MAAM,EAAE;AAAvC,OAAD,CAAR;AACD;AACF;AACF,CAtCM;;GAAMG,gB;;KAAAA,gB","sourcesContent":["import React, { useCallback, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { LocationProps } from \"./LocationProps\";\r\nimport { createLocation, updateLocation } from \"./locationApi\";\r\n\r\ntype SaveLocationFn = (location: LocationProps) => Promise<any>;\r\n\r\nexport interface LocationState {\r\n  saving: boolean;\r\n  savingError?: Error | null;\r\n  saveLocation?: SaveLocationFn;\r\n}\r\n\r\nconst initialState: LocationState = {\r\n  saving: false,\r\n};\r\n\r\nexport const LocationContext = React.createContext<LocationState>(\r\n  initialState\r\n);\r\n\r\ninterface LocationProviderProps {\r\n  children: PropTypes.ReactNodeLike;\r\n}\r\n\r\nexport const LocationProvider: React.FC<LocationProviderProps> = ({\r\n  children,\r\n}) => {\r\n  const [state, setState] = useState<LocationState>(initialState);\r\n  const { saving, savingError } = state;\r\n  const saveLocation = useCallback<SaveLocationFn>(saveLocationCallback, []);\r\n  const value = {\r\n    saving,\r\n    savingError,\r\n    saveLocation,\r\n  };\r\n\r\n  return (\r\n    <LocationContext.Provider value={value}>\r\n      {children}\r\n    </LocationContext.Provider>\r\n  );\r\n\r\n  async function saveLocationCallback(location: LocationProps) {\r\n    try {\r\n      setState({...state, savingError: null, saving: true});\r\n      const loc = {\r\n        id: location.id!,\r\n        city: location.city!,\r\n        country: location.country!,\r\n        tip: location.tip!,\r\n        rating: location.rating!,\r\n        user: location.user!,\r\n      };\r\n      const savedLocation = await (location.id\r\n          ? updateLocation(loc)\r\n          : createLocation(loc));\r\n      setState({...state, savingError: null, saving: false});\r\n      return savedLocation;\r\n    } catch (error: any) {\r\n      setState({...state, savingError: error, saving: false});\r\n    }\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}