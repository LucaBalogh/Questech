{"ast":null,"code":"var _jsxFileName = \"D:\\\\Faculta\\\\Licenta\\\\Traveltech\\\\UI\\\\src\\\\main\\\\dashboard\\\\LocationMainProvider.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from \"react\";\nimport { createMainLocation } from \"./locationMainApi\";\nimport { loggedUser } from \"../../utils/utilsMethods\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  saving: false\n};\nexport const LocationMainContext = /*#__PURE__*/React.createContext(initialState);\nexport const LocationMainProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, setState] = useState(initialState);\n  const {\n    saving,\n    savingError\n  } = state;\n  const saveLocation = useCallback(saveLocationCallback, []);\n  const value = {\n    saving,\n    savingError,\n    saveLocation\n  };\n  return /*#__PURE__*/_jsxDEV(LocationMainContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n\n  async function saveLocationCallback(location) {\n    try {\n      setState({ ...state,\n        savingError: null,\n        saving: true\n      });\n      const loc = {\n        id: location.id,\n        city: location.city,\n        country: location.country,\n        tip: location.tip,\n        rating: location.rating,\n        user: loggedUser\n      };\n      const savedLocation = await createMainLocation(loc);\n      setState({ ...state,\n        savingError: null,\n        saving: false\n      });\n      return savedLocation;\n    } catch (error) {\n      setState({ ...state,\n        savingError: error,\n        saving: false\n      });\n    }\n  }\n};\n\n_s(LocationMainProvider, \"kAHu6Lsp2XbNQLYS+135vBW8bjc=\");\n\n_c = LocationMainProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"LocationMainProvider\");","map":{"version":3,"sources":["D:/Faculta/Licenta/Traveltech/UI/src/main/dashboard/LocationMainProvider.tsx"],"names":["React","useCallback","useState","createMainLocation","loggedUser","initialState","saving","LocationMainContext","createContext","LocationMainProvider","children","state","setState","savingError","saveLocation","saveLocationCallback","value","location","loc","id","city","country","tip","rating","user","savedLocation","error"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,QAA6C,OAA7C;AAGA,SAASC,kBAAT,QAAmC,mBAAnC;AACA,SAAQC,UAAR,QAAyB,0BAAzB;;AAUA,MAAMC,YAA+B,GAAG;AACtCC,EAAAA,MAAM,EAAE;AAD8B,CAAxC;AAIA,OAAO,MAAMC,mBAAmB,gBAAGP,KAAK,CAACQ,aAAN,CACjCH,YADiC,CAA5B;AAQP,OAAO,MAAMI,oBAAyD,GAAG,QAEnE;AAAA;;AAAA,MAFoE;AACxEC,IAAAA;AADwE,GAEpE;AACJ,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAoBG,YAApB,CAAlC;AACA,QAAM;AAAEC,IAAAA,MAAF;AAAUO,IAAAA;AAAV,MAA0BF,KAAhC;AACA,QAAMG,YAAY,GAAGb,WAAW,CAAqBc,oBAArB,EAA2C,EAA3C,CAAhC;AACA,QAAMC,KAAK,GAAG;AACZV,IAAAA,MADY;AAEZO,IAAAA,WAFY;AAGZC,IAAAA;AAHY,GAAd;AAMA,sBACE,QAAC,mBAAD,CAAqB,QAArB;AAA8B,IAAA,KAAK,EAAEE,KAArC;AAAA,cACGN;AADH;AAAA;AAAA;AAAA;AAAA,UADF;;AAMA,iBAAeK,oBAAf,CAAoCE,QAApC,EAAiE;AAC/D,QAAI;AACFL,MAAAA,QAAQ,CAAC,EAAE,GAAGD,KAAL;AAAYE,QAAAA,WAAW,EAAE,IAAzB;AAA+BP,QAAAA,MAAM,EAAE;AAAvC,OAAD,CAAR;AACA,YAAMY,GAAG,GAAG;AACVC,QAAAA,EAAE,EAAEF,QAAQ,CAACE,EADH;AAEVC,QAAAA,IAAI,EAAEH,QAAQ,CAACG,IAFL;AAGVC,QAAAA,OAAO,EAAEJ,QAAQ,CAACI,OAHR;AAIVC,QAAAA,GAAG,EAAEL,QAAQ,CAACK,GAJJ;AAKVC,QAAAA,MAAM,EAAEN,QAAQ,CAACM,MALP;AAMVC,QAAAA,IAAI,EAAEpB;AANI,OAAZ;AAQA,YAAMqB,aAAa,GAAG,MAAOtB,kBAAkB,CAACe,GAAD,CAA/C;AACAN,MAAAA,QAAQ,CAAC,EAAE,GAAGD,KAAL;AAAYE,QAAAA,WAAW,EAAE,IAAzB;AAA+BP,QAAAA,MAAM,EAAE;AAAvC,OAAD,CAAR;AACA,aAAOmB,aAAP;AACD,KAbD,CAaE,OAAOC,KAAP,EAAmB;AACnBd,MAAAA,QAAQ,CAAC,EAAE,GAAGD,KAAL;AAAYE,QAAAA,WAAW,EAAEa,KAAzB;AAAgCpB,QAAAA,MAAM,EAAE;AAAxC,OAAD,CAAR;AACD;AACF;AACF,CApCM;;GAAMG,oB;;KAAAA,oB","sourcesContent":["import React, { useCallback, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { LocationMainProps } from \"./LocationMainProps\";\r\nimport { createMainLocation } from \"./locationMainApi\";\r\nimport {loggedUser} from \"../../utils/utilsMethods\";\r\n\r\ntype SaveLocationMainFn = (location: LocationMainProps) => Promise<any>;\r\n\r\nexport interface LocationMainState {\r\n  saving: boolean;\r\n  savingError?: Error | null;\r\n  saveLocation?: SaveLocationMainFn;\r\n}\r\n\r\nconst initialState: LocationMainState = {\r\n  saving: false,\r\n};\r\n\r\nexport const LocationMainContext = React.createContext<LocationMainState>(\r\n  initialState\r\n);\r\n\r\ninterface LocationMainProviderProps {\r\n  children: PropTypes.ReactNodeLike;\r\n}\r\n\r\nexport const LocationMainProvider: React.FC<LocationMainProviderProps> = ({\r\n  children,\r\n}) => {\r\n  const [state, setState] = useState<LocationMainState>(initialState);\r\n  const { saving, savingError } = state;\r\n  const saveLocation = useCallback<SaveLocationMainFn>(saveLocationCallback, []);\r\n  const value = {\r\n    saving,\r\n    savingError,\r\n    saveLocation,\r\n  };\r\n\r\n  return (\r\n    <LocationMainContext.Provider value={value}>\r\n      {children}\r\n    </LocationMainContext.Provider>\r\n  );\r\n\r\n  async function saveLocationCallback(location: LocationMainProps) {\r\n    try {\r\n      setState({ ...state, savingError: null, saving: true });\r\n      const loc = {\r\n        id: location.id!,\r\n        city: location.city!,\r\n        country: location.country!,\r\n        tip: location.tip!,\r\n        rating: location.rating!,\r\n        user: loggedUser,\r\n      };\r\n      const savedLocation = await (createMainLocation(loc));\r\n      setState({ ...state, savingError: null, saving: false });\r\n      return savedLocation;\r\n    } catch (error: any) {\r\n      setState({ ...state, savingError: error, saving: false });\r\n    }\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}